{"version":3,"sources":["assets/images/abstract_movie_poster.svg","utils/common.js","store/middlewares/utils.js","store/middlewares/moviedb-api.js","store/domains/common/common.types.js","store/domains/ui/ui.types.js","components/Notifier.js","store/domains/ui/ui.actions.js","components/utils/score-color.js","components/MovieCard.js","components/types/movie-type.js","components/placeholders/MovieCardPlaceholder.js","components/MovieList.js","components/MovieBrowser.js","store/domains/home/home.types.js","store/domains/user/user.types.js","store/domains/user/user.actions.js","store/utils.js","components/Home.js","store/domains/home/home.actions.js","components/SearchInput.js","components/SearchOutput.js","store/domains/search/search.types.js","store/domains/search/search.actions.js","components/Navbar.js","components/utils/debounce.js","store/domains/movie/movie.types.js","components/placeholders/MoviePagePlaceholder.js","components/utils/formatter.js","components/placeholders/EmptyBlock.js","components/Movie.js","store/domains/movie/movie.actions.js","components/Page404.js","store/domains/entities/entities.types.js","components/MovieCardFetch.js","components/Favorites.js","store/domains/entities/entities.actions.js","components/Sidebar.js","components/App.js","store/domains/common/common.actions.js","store/domains/common/common.reducer.js","store/domains/ui/ui.utils.js","store/domains/ui/ui.reducer.js","store/domains/user/user.reducer.js","store/domains/shared.js","store/domains/movie/movie.reducer.js","store/domains/home/home.reducer.js","store/domains/entities/entities.reducer.js","store/domains/search/search.reducer.js","store/store.js","index.js"],"names":["generateId","globalId","dispatchAction","action","payload","next","Array","isArray","forEach","item","type","console","error","ActionTask","id","isCancelled","isDone","_handlers","cancel","done","Object","isFrozen","this","h","freeze","subscribe","event","handler","push","unsubscribe","filter","events","DONE","CANCEL","API_KEY","MOVIEDB_MIDDLEWARE","MiddlewareName","get","url","params","cancelToken","axios","baseURL","method","token","assign","api_key","language","timeout","GENRES_FETCH_REQUEST","GENRES_FETCH_SUCCESS","GENRES_FETCH_FAIL","ADD_ERROR","REMOVE_ERROR","displayed","withSnackbar","connect","state","errors","ui","dispatch","removeError","enqueueSnackbar","closeSnackbar","useEffect","includes","message","key","variant","Button","onClick","onExited","reason","splice","indexOf","VoteColors","getScoreColor","score","color","useStyles","makeStyles","theme","root","position","boxShadow","textDecoration","transform","opacity","display","posterContainer","overflow","posterImage","width","minHeight","borderRadius","backgroundColor","transition","posterOverlay","content","height","left","top","background","details","padding","movieName","fontWeight","margin","lineHeight","justifyContent","minWidth","breakpoints","down","fontSize","extraInfo","favoriteBtn","right","paddingLeft","spacing","paddingRight","favoriteBtnActive","MovieCard","title","genres","voteAverage","releaseDate","posterImageUrl","isFavorite","onFavorite","classes","vote","className","to","src","alt","size","e","stopPropagation","preventDefault","classNames","Typography","component","style","Date","getFullYear","length","slice","join","PropTypes","shape","oneOfType","string","number","isRequired","overview","arrayOf","instanceOf","backdropImageUrl","duration","budget","backdropImage","productionCountries","legend","actors","exact","name","character","gender","photo","crew","department","job","isExtendedDataLoaded","bool","MovieCardPlaceholder","Box","Skeleton","marginTop","cursor","transitionDelay","zIndex","MovieListItem","children","Grid","xs","sm","md","MovieList","container","justify","wrap","loader","alignItems","button","border","buttonProgress","palette","secondary","animationDuration","marginRight","MovieBrowser","movies","isFetching","isFetched","totalMovies","placeholdersAmount","onLoadMore","canLoadMore","Fragment","from","map","movie","index","once","placeholder","fullWidth","disabled","CircularProgress","disableShrink","thickness","Loop","POPULAR_MOVIES_FETCH_REQUEST","POPULAR_MOVIES_FETCH_SUCCESS","POPULAR_MOVIES_FETCH_FAIL","TOP_RATED_MOVIES_FETCH_REQUEST","TOP_RATED_MOVIES_FETCH_SUCCESS","TOP_RATED_MOVIES_FETCH_FAIL","UPCOMING_MOVIES_FETCH_REQUEST","UPCOMING_MOVIES_FETCH_SUCCESS","UPCOMING_MOVIES_FETCH_FAIL","USER_VISITED_MOVIE","USER_FAVORITE_TOGGLE","USER_CLEARED_VISITED_MOVIES","toggleFavorite","prepareImage","getMovie","entities","user","moviesById","genreIds","genresById","favoriteMovieIds","prepareMovie","raw","posterSize","backdropSize","extended","basicData","i","genre_ids","vote_average","release_date","poster_path","backdrop_path","popularity","extendedData","runtime","production_countries","c","tagline","credits","cast","profile_path","person","movieList","CustomTabs","withStyles","textAlign","indicator","Tabs","CustomTab","selected","Tab","categories","isAppReady","common","popularMovies","home","topRatedMovies","upcomingMovies","fetchPopularMovies","page","meta","target","handlers","request","success","fail","fetchTopRatedMovies","fetchUpcomingMovies","props","useState","categoryName","setCategoryName","categoryMap","fetch","category","ids","switchTab","newCategory","Container","value","onChange","newValue","label","flexWrap","icon","pointerEvents","input","transitions","create","SearchInput","onFocus","onBlur","InputBase","inputProps","maxHeight","overflowY","useItemStyles","itemImage","flexShrink","itemInfo","marginLeft","Item","poster","require","ListItem","Link","SearchOutput","fullHeight","List","SEARCH_REQUEST","SEARCH_SUCCESS","SEARCH_FAIL","SEARCH_CANCEL","SEARCH_QUERY_CHANGED","DUMMY_ACTION","searchTask","cancelSearch","menu","brand","overlay","CustomAppBar","AppBar","NavButton","search","location","router","pathname","searchMovies","query","trim","task","changeQuery","useTheme","onMenu","foundMovies","isMobile","useMediaQuery","showMobileSearch","setShowMobileSearch","showOutput","setShowOutput","output","searchDebounce","useCallback","func","wait","immediate","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","debounce","handleSearchInput","enabled","document","body","Toolbar","IconButton","edge","Menu","noWrap","direction","fill","MOVIE_PAGE_FETCH_REQUEST","MOVIE_PAGE_FETCH_SUCCESS","MOVIE_PAGE_FETCH_FAIL","SIMILAR_MOVIES_FETCH_REQUEST","SIMILAR_MOVIES_FETCH_SUCCESS","SIMILAR_MOVIES_FETCH_FAIL","RECOMMENDED_MOVIES_FETCH_REQUEST","RECOMMENDED_MOVIES_FETCH_SUCCESS","RECOMMENDED_MOVIES_FETCH_FAIL","skeleton","MoviePagePlaceholder","subtitle","text","rows","_","Math","random","Rating","iconEmpty","readOnly","Formatter","date","getDay","getMonth","x","toString","replace","EmptyBlock","movieContainer","paddingTop","paddingBottom","backdrop","backgroundImage","objectFit","genreList","listStyle","genre","marginBottom","crewList","MovieInfo","loaded","handleClick","window","open","HomeRounded","MovieRecommendations","fetchSimilarMovies","fetchRecommendedMovies","recommended","recommendedMovies","similar","similarMovies","fetchSimilarMoviesCb","fetchRecommendedMoviesCb","amount","fetchMovie","append_to_response","fetchMoviePage","movieId","makeMovieVisited","urlId","useParams","scrollTo","flexDirection","Page404","autoPlay","controls","MOVIE_FETCH_SUCCESS","MovieCardFetch","ready","movieIds","minheight","list","social","Sidebar","onClose","Drawer","anchor","Divider","ListItemIcon","ListItemText","primary","overflowWrap","Instagram","GitHub","LinkedIn","isLoading","isGenresLoaded","fetchGenres","showSidebar","setShowSidebar","autoHideDuration","CssBaseline","LinearProgress","path","Home","Movie","Favorites","initialState","universalMessage","prepareError","isAxiosError","response","status","visitedMovieIds","JSON","parse","localStorage","getItem","moviesFetchInitialState","moviesFetchReducer","prefix","total_results","results","undefined","initialSearchState","filterEmptyMovies","m","history","createBrowserHistory","rootReducer","combineReducers","err","setItem","stringify","Set","LOCATION_CHANGE","sort","a","b","preparedMovie","fetchDate","connectRouter","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","debug","keys","isDummy","log","msg","data","AxiosCancelToken","source","toLowerCase","MovieDbApiMiddleware","routerMiddleware","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1acc31f7.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/abstract_movie_poster.016bd1f8.svg\";","// A simple function for generation of unique IDs\nexport const generateId = (function () {\n    let globalId = 0\n    return function () {\n        return globalId++\n    }\n})()\n","import {generateId} from \"../../utils/common\"\n\n/**\n * This function allows us to dispatch action(s)\n * defined in different ways through the 'next' function.\n *\n * @param {string|function|array} action\n * @param {*} payload\n * @param {function} next\n * @returns {*}\n */\nexport function dispatchAction(action, payload = null, next) {\n    if (Array.isArray(action)) return action.forEach(item => dispatchAction(item, payload, next))\n\n    if (typeof action === 'string') {\n        return next({type: action, payload})\n    } else if (typeof action === \"function\") {\n        return action(next, payload)\n    } else {\n        console.error('\\'action\\' prop must be a string or function, but got: ' + typeof action)\n    }\n}\n\n/**\n * Allows us to manage action executing in a Middleware.\n *\n * @returns {{cancel(): void, , done(): void, isCancelled: boolean, subscribe(string, function): void, unsubscribe(string, function): void, id: string, _handlers: {cancel: [], done: []}, isDone: boolean}}\n * @constructor\n */\nexport function ActionTask() {\n    return {\n        id: \"TASK-\" + generateId(),\n        isCancelled: false,\n        isDone: false,\n        _handlers: {\n            cancel: [],\n            done: [],\n        },\n        cancel() {\n            if(Object.isFrozen(this)) return\n            this.isCancelled = true\n            this._handlers.cancel.forEach(h => h && h(this))\n        },\n        done() {\n            this.isDone = true\n            this._handlers.done.forEach(h => h && h(this))\n            Object.freeze(this)\n        },\n        subscribe(event, handler) {\n            this._handlers[event].push(handler)\n        },\n        unsubscribe(event, handler) {\n            this._handlers[event] = this._handlers[event].filter(h => h !== handler)\n        }\n    }\n}\n\nActionTask.events = {\n    DONE: 'done',\n    CANCEL: 'cancel'\n}\n","import axios from \"axios\"\nimport {dispatchAction, ActionTask} from \"./utils\"\nimport {CancelToken as AxiosCancelToken} from 'axios'\n\nconst API_KEY = \"4e44d9029b1270a757cddc766a1bcb63\"\n\nexport const MOVIEDB_MIDDLEWARE = 'MOVIEDB_MIDDLEWARE'\n\n// ACTION SCHEMA\n// -----------\n// const example = {\n//     type: \"SEARCH_MOVIES\",\n//     payload: {\n//         // for POST method\n//         someData: {},\n//     },\n//     meta: {\n//         target: MOVIEDB_MIDDLEWARE_TARGET,\n//         url: \"popular/movie\",\n//         method: \"GET\",\n//         params: {page: 2},\n//         handlers: {\n//             request: \"SOME_ACTION_REQUEST\",\n//             success: function (dispatch, {results: movies}) {\n//                 dispatch({type: \"SOME_ACTION_SUCCESS\", payload: {movies}})\n//             },\n//             fail: [\n//                 \"ADD_ERROR\",\n//                 \"SOME_ACTION_FAIL\",\n//                 function (dispatch, {error}) {\n//                     console.error('ERROR', error)\n//                 }\n//             ],\n//             cancel: \"SOME_ACTION_CANCEL\"\n//         }\n//     }\n// }\n\nconst MiddlewareName = 'MovieDB Api Middleware'\n\nexport function MovieDbApiMiddleware(debug = false) {\n    return store => next => async action => {\n        const {type, payload, meta} = action\n\n        if (!meta || meta.target !== MOVIEDB_MIDDLEWARE) return next(action)\n        if (!meta.handlers || !Object.keys(meta.handlers).length)\n            return console.error(`action must contain non empty 'meta' object with at least one handler`, action)\n\n        const {url, method, params, handlers} = meta\n        const task = meta.task || {isCancelled: false, isDone: false, isDummy: true}\n        const log = (msg, ...data) => console.log(\n            `%c[${MiddlewareName}]`, 'font-weight: bold',\n            `[${type}]${!task.isDummy ? ` [${task.id}]` : \"\"}: ${msg}`,\n            ...data\n        )\n\n        const cancelToken = AxiosCancelToken.source()\n        !task.isDummy && task.subscribe(ActionTask.events.CANCEL, function () {\n            cancelToken.cancel()\n            if (debug) log(`Action has been canceled`)\n            if (handlers.cancel) dispatchAction(handlers.cancel, null, store.dispatch)\n        })\n\n        if (!task.isCancelled && handlers.request) {\n            if (debug) log(`Request handling`, meta, payload)\n            dispatchAction(handlers.request, null, store.dispatch)\n        }\n\n        try {\n            let response\n            if (method.toLowerCase() === 'get') response = await get(url, params, cancelToken)\n            // else if () { ... }\n            else {\n                console.error('Unknown request method: ' + method, action)\n                return next(action)\n            }\n            if (handlers.success && !task.isCancelled) {\n                if (debug) log(`Success handling`)\n                dispatchAction(handlers.success, response.data, store.dispatch)\n            }\n        } catch (error) {\n            if (!task.isCancelled) {\n                if (debug) log(`Fail handling`, error)\n                if (handlers.fail) {\n                    dispatchAction(handlers.fail, {error}, store.dispatch)\n                } else {\n                    console.error(`Uncaught exception in ${MiddlewareName}: `, error)\n                }\n            }\n        } finally {\n            if (!task.isDummy && !task.isCancelled) task.done()\n            // TODO Should we make the task done if it is cancelled?\n            // if (task) task.done()\n        }\n    }\n\n}\n\n\nfunction get(url, params = {}, cancelToken) {\n    return axios({\n        baseURL: \"https://api.themoviedb.org/3/\",\n        url: url,\n        method: \"get\",\n        cancelToken: cancelToken.token,\n        params: Object.assign({},\n            {\n                api_key: API_KEY,\n                language: \"en-US\"\n            }, params\n        ),\n        timeout: 15 * 1000\n    })\n}\n","export const GENRES_FETCH_REQUEST = 'GENRES_FETCH_REQUEST'\nexport const GENRES_FETCH_SUCCESS = 'GENRES_FETCH_SUCCESS'\nexport const GENRES_FETCH_FAIL = 'GENRES_FETCH_FAIL'\n","export const ADD_ERROR = 'ADD_ERROR'\nexport const REMOVE_ERROR = 'REMOVE_ERROR'\n","import React, {useEffect} from 'react'\nimport {connect} from 'react-redux'\nimport {withSnackbar} from 'notistack'\nimport {removeError} from \"../store/domains/ui/ui.actions\"\nimport {Button} from \"@material-ui/core\"\n\nconst displayed = []\n\nfunction Notifier({enqueueSnackbar, closeSnackbar, removeError, errors = []}) {\n\n    useEffect(function () {\n        errors.forEach(error => {\n            if(displayed.includes(error.id)) return\n            enqueueSnackbar(error.message, {\n                key: error.id,\n                variant: \"error\",\n                action: key => (\n                    <Button onClick={() => closeSnackbar(key)}>OK</Button>\n                ),\n                onExited: (event, reason, key) => {\n                    displayed.splice(displayed.indexOf(error.id), 1)\n                    removeError(error)\n                }\n            })\n            displayed.push(error.id)\n        })\n    }, [errors, closeSnackbar, enqueueSnackbar, removeError])\n\n    return null\n}\n\nfunction mapStateToProps(state) {\n    return {\n        errors: state.ui.errors\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        removeError: id => dispatch(removeError(id))\n    }\n}\n\nexport default withSnackbar(connect(mapStateToProps, mapDispatchToProps)(Notifier));\n","import {ADD_ERROR, REMOVE_ERROR} from \"./ui.types\"\n\nexport function addError(error) {\n    return {type: ADD_ERROR, payload: {error}}\n}\n\nexport function removeError(error) {\n    return {type: REMOVE_ERROR, payload: {error}}\n}\n","export const VoteColors = {\n    UNKNOWN: '#999',\n    BAD: '#d63737',\n    OK: '#a7a7a7',\n    GOOD: '#5fbb67',\n    EXCELLENT: '#3bb33b'\n}\n\nexport function getScoreColor(score) {\n    let color = VoteColors.EXCELLENT\n    if(!score || score === 0) color = VoteColors.UNKNOWN\n    else if(score < 5.5) color = VoteColors.BAD\n    else if(score < 6.5) color = VoteColors.OK\n    else if(score < 7.25) color = VoteColors.GOOD\n\n    return color\n}\n","import {makeStyles} from \"@material-ui/core/styles\"\nimport React from \"react\"\nimport {Typography} from \"@material-ui/core\"\nimport {Link} from \"react-router-dom\"\nimport {getScoreColor} from \"./utils/score-color\"\nimport Button from \"@material-ui/core/Button\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\nimport classNames from 'classnames'\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: \"relative\",\n        boxShadow: \"none\",\n        textDecoration: 'none',\n        color: 'inherit',\n        \"&:hover\": {\n            \"& $posterImage\":{\n                transform: 'scale(1.075)'\n            },\n            \"& $posterOverlay\": {\n                opacity: 1\n            },\n            \"& $favoriteBtn\": {\n                display: 'flex'\n            }\n        },\n    },\n    posterContainer: {\n        position: 'relative',\n        overflow: 'hidden'\n    },\n    posterImage: {\n        position: 'relative',\n        display: 'block',\n        width: \"100%\",\n        minHeight: 250,\n        borderRadius: \"4px\",\n        backgroundColor: '#e8e8e8',\n        transition: 'all 0.15s ease-in-out'\n    },\n    posterOverlay: {\n        position: 'absolute',\n        content: '\"\"',\n        width: '100%',\n        height: '100%',\n        left: 0,\n        top: 0,\n        opacity: 0,\n        transition: 'all 0.15s ease-in-out',\n        background: 'linear-gradient(180deg, rgba(255,255,255,0) 41%, rgba(0,0,0,0.40) 100%)'\n    },\n    details: {\n        padding: '6px 4px'\n    },\n    movieName: {\n        fontWeight: \"normal\",\n        margin: \"4px 0 8px 0\",\n        lineHeight: '140%'\n    },\n    score: {\n        display: 'inline-flex',\n        position: 'absolute',\n        left: -5,\n        top: 8,\n        justifyContent: 'center',\n        fontWeight: 'bold',\n        padding: '2px 8px',\n        minWidth: 30,\n        color: 'white',\n        background: '#83d620',\n        borderRadius: 2,\n        [theme.breakpoints.down('xs')]: {\n            left: -8,\n            top: 12,\n            fontSize: '1.5rem',\n            minWidth: 40,\n        }\n    },\n    extraInfo: {\n        color: 'grey',\n        lineHeight: '150%'\n    },\n    favoriteBtn: {\n        display: 'none',\n        position: 'absolute',\n        right: 10,\n        top: 10,\n        minWidth: 16,\n        paddingLeft: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        color: 'white',\n        background: 'rgba(75, 87, 95, 0.9)',\n        \"&:hover\": {\n            background: 'rgba(245, 0, 87, 1)',\n        },\n        [theme.breakpoints.down('xs')]: {\n            display: 'flex',\n            padding: theme.spacing(2.5),\n            \"& svg\": {\n                height: theme.spacing(4),\n                width: theme.spacing(4),\n            }\n        }\n    },\n    favoriteBtnActive: {\n        display: 'flex',\n        color: 'white',\n        background: 'rgba(245, 0, 87, 1)',\n        \"&:hover\": {\n            background: 'rgba(245, 0, 87, 0.85)',\n        }\n    }\n}))\n\n\nfunction MovieCard({id, title, genres, voteAverage, releaseDate, posterImageUrl, isFavorite, onFavorite}) {\n    const classes = useStyles()\n\n    const color = getScoreColor(voteAverage)\n\n    const vote = voteAverage > 0 ? voteAverage : '-'\n\n    function handleFavorite(e){\n        e.stopPropagation()\n        e.preventDefault()\n        onFavorite && onFavorite(id)\n    }\n\n    return (\n        <Link className={classes.root} to={\"/movie/\"+id}>\n            <div className={classes.posterContainer}>\n                <img className={classes.posterImage} src={posterImageUrl} alt={title}/>\n                <div className={classes.posterOverlay} />\n                <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    size=\"medium\"\n                    onClick={handleFavorite}\n                    className={classNames([classes.favoriteBtn, {[classes.favoriteBtnActive]: isFavorite}])}>\n                    {isFavorite ? <FavoriteIcon /> : <FavoriteBorderIcon/>}\n                </Button>\n            </div>\n            <div className={classes.details}>\n                <Typography component=\"h4\" className={classes.movieName}>{title}</Typography>\n                <Typography variant=\"body1\" className={classes.score} style={{backgroundColor: color}}>\n                    {vote}\n                </Typography>\n                <Typography variant=\"body1\" className={classes.extraInfo}>\n                    {new Date(releaseDate).getFullYear()} • {genres.length ? genres.slice(0, 3).join(', '): '-'}\n                </Typography>\n            </div>\n        </Link>\n    )\n}\n\nexport default MovieCard\n","import PropTypes from \"prop-types\"\n\nexport const Movie = PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    title: PropTypes.string.isRequired,\n    overview: PropTypes.string.isRequired,\n    genres: PropTypes.arrayOf(PropTypes.string).isRequired,\n    releaseDate: PropTypes.instanceOf(Date).isRequired,\n    voteAverage: PropTypes.number.isRequired,\n    posterImageUrl: PropTypes.string,\n    backdropImageUrl: PropTypes.string,\n\n    duration: PropTypes.number,\n    budget: PropTypes.number,\n    backdropImage: PropTypes.string,\n    posterImage: PropTypes.string,\n    productionCountries: PropTypes.arrayOf(PropTypes.string),\n    legend: PropTypes.string,\n    actors: PropTypes.arrayOf(PropTypes.exact({\n        id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        name: PropTypes.string,\n        character: PropTypes.string,\n        gender: PropTypes.number,\n        photo: PropTypes.string\n    })),\n    crew: PropTypes.arrayOf(PropTypes.exact({\n        id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n        name: PropTypes.string,\n        department: PropTypes.string,\n        job: PropTypes.string,\n        gender: PropTypes.number,\n        photo: PropTypes.string\n    })),\n\n    isExtendedDataLoaded: PropTypes.bool\n})\n","import {Box} from \"@material-ui/core\"\nimport Skeleton from \"@material-ui/lab/Skeleton\"\nimport React from \"react\"\n\n\nexport default function MovieCardPlaceholder() {\n    return (\n        <Box>\n            <Skeleton variant=\"rect\" width={'100%'} height={270}/>\n            <Skeleton variant=\"rect\" style={{marginTop: 15}} width='100%'/>\n            <Skeleton variant=\"rect\" style={{marginTop: 8}} width='70%'/>\n        </Box>\n    )\n}\n","import React from 'react'\nimport Grid from \"@material-ui/core/Grid\"\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    item: {\n        cursor: 'pointer',\n        padding: theme.spacing(1),\n        transition: 'all 0.1s cubic-bezier(0.43, 0.57, 0, 0.99)',\n        transitionDelay: '0.075s',\n        \"&:hover\": {\n            background: 'white',\n            zIndex: 2,\n        },\n        [theme.breakpoints.down('sm')]: {\n            padding: '15px 25px !important'\n        }\n    },\n}))\n\nexport function MovieList({children}) {\n    return (\n        <Grid container justify=\"flex-start\" wrap={\"wrap\"} spacing={2}>\n            {children}\n        </Grid>\n    )\n}\n\nexport function MovieListItem({children}) {\n    const classes = useStyles()\n\n    return (\n        <Grid className={classes.item} item xs={12} sm={4} md={2}>\n            {children}\n        </Grid>\n    )\n\n}\n\nexport default MovieList\n","import React from \"react\"\nimport LazyLoad from 'react-lazyload'\nimport PropTypes from 'prop-types'\nimport MovieCard from \"./MovieCard\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport CircularProgress from \"@material-ui/core/CircularProgress\"\nimport {Movie} from \"./types/movie-type\"\nimport Button from \"@material-ui/core/Button\"\nimport {BorderColor, Loop} from \"@material-ui/icons\"\nimport MovieCardPlaceholder from \"./placeholders/MovieCardPlaceholder\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nconst useStyles = makeStyles(theme => ({\n    loader: {\n        height: 400,\n        width: 300,\n        margin: \"0 auto\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    button: {\n        marginTop: 20,\n        color: 'white',\n        border: '1px solid white'\n    },\n    buttonProgress: {\n        color: theme.palette.secondary,\n        animationDuration: '550ms',\n        marginRight: 6\n    },\n}))\n\nMovieBrowser.propTypes = {\n    movies: PropTypes.arrayOf(Movie),\n    isFetching: PropTypes.bool,\n    isFetched: PropTypes.bool,\n    totalMovies: PropTypes.number,\n    onLoadMore: PropTypes.func,\n    placeholdersAmount: PropTypes.number,\n}\n\nfunction MovieBrowser({movies = [], isFetching, isFetched, totalMovies, placeholdersAmount = 5, onLoadMore, onFavorite}) {\n    const classes = useStyles()\n\n    const canLoadMore = movies.length < totalMovies && !!onLoadMore\n\n    return (\n        <React.Fragment>\n            <MovieList>\n                {(isFetched ? movies : Array.from(new Array(placeholdersAmount))).map((movie, index) => (\n                    <MovieListItem key={movie ? movie.id : 'index:'+index}>\n                        {movie ?\n                            <LazyLoad height={400} once placeholder={<MovieCardPlaceholder />}>\n                                <MovieCard {...movie} onFavorite={onFavorite} />\n                            </LazyLoad> :\n                            <MovieCardPlaceholder/>}\n                    </MovieListItem>\n                ))}\n            </MovieList>\n            {canLoadMore &&\n            <Button className={classes.button} variant=\"outlined\" fullWidth size={\"large\"} disabled={isFetching} onClick={onLoadMore}>\n                {isFetching ?\n                    <CircularProgress\n                        className={classes.buttonProgress}\n                        variant=\"indeterminate\"\n                        disableShrink\n                        size={16}\n                        thickness={4}/> :\n                    <Loop className={classes.buttonProgress}/>}\n                {isFetching ? 'Loading...' : 'Load more'}\n            </Button>}\n        </React.Fragment>\n    )\n}\n\nexport default MovieBrowser\n","export const POPULAR_MOVIES_FETCH_REQUEST = 'POPULAR_MOVIES_FETCH_REQUEST'\nexport const POPULAR_MOVIES_FETCH_SUCCESS = 'POPULAR_MOVIES_FETCH_SUCCESS'\nexport const POPULAR_MOVIES_FETCH_FAIL = 'POPULAR_MOVIES_FETCH_FAIL'\n\nexport const TOP_RATED_MOVIES_FETCH_REQUEST = 'TOP_RATED_MOVIES_FETCH_REQUEST'\nexport const TOP_RATED_MOVIES_FETCH_SUCCESS = 'TOP_RATED_MOVIES_FETCH_SUCCESS'\nexport const TOP_RATED_MOVIES_FETCH_FAIL = 'TOP_RATED_MOVIES_FETCH_FAIL'\n\nexport const UPCOMING_MOVIES_FETCH_REQUEST = 'UPCOMING_MOVIES_FETCH_REQUEST'\nexport const UPCOMING_MOVIES_FETCH_SUCCESS = 'UPCOMING_MOVIES_FETCH_SUCCESS'\nexport const UPCOMING_MOVIES_FETCH_FAIL = 'UPCOMING_MOVIES_FETCH_FAIL'\n","export const USER_VISITED_MOVIE = 'USER_VISITED_MOVIE'\nexport const USER_FAVORITE_TOGGLE = 'USER_FAVORITE_TOGGLE'\n\nexport const USER_CLEARED_VISITED_MOVIES = 'USER_CLEANED_VISITED_MOVIES'\n","import {\n    USER_FAVORITE_TOGGLE,\n    USER_VISITED_MOVIE,\n    USER_CLEARED_VISITED_MOVIES\n} from \"./user.types\"\n\nexport function makeMovieVisited(id) {\n    return {type: USER_VISITED_MOVIE, payload: {id}}\n}\n\nexport function clearVisitedMovies(){\n    return {type: USER_CLEARED_VISITED_MOVIES}\n}\n\nexport function toggleFavorite(id) {\n    return {type: USER_FAVORITE_TOGGLE, payload: {id}}\n}\n","export function prepareImage(url, size = 'w500') {\n    // size = 'original'\n    if (!url) return null\n    return `https://image.tmdb.org/t/p/${size}${url}`\n}\n\nexport function getMovie(id, entities, user) {\n    const movie = entities.moviesById[id]\n    if(!movie) return null\n    return {\n        ...movie,\n        genres: movie.genreIds.map(id => entities.genresById[id]),\n        isFavorite: user.favoriteMovieIds.indexOf(id) !== -1\n    }\n}\n\nexport function prepareMovie({raw = {}, posterSize = 'w500', backdropSize = 'original', extended = false}) {\n    const basicData = {\n        id: raw.id,\n        title: raw.title,\n        overview: raw.overview,\n        genreIds: raw.genres ? raw.genres.map(i => i.id) : raw.genre_ids,\n        voteAverage: raw.vote_average,\n        releaseDate: new Date(raw.release_date),\n        posterImageUrl: prepareImage(raw.poster_path, posterSize),\n        backdropImageUrl: prepareImage(raw.backdrop_path, backdropSize),\n        popularity: raw.popularity\n    }\n    const extendedData = !extended ? null : {\n        duration: raw.runtime,\n        budget: raw.budget,\n        productionCountries: (raw.production_countries || []).map(c => c.name),\n        legend: raw.tagline,\n        actors: (raw.credits || []).cast.map(cast => ({\n            id: cast.id,\n            name: cast.name,\n            character: cast.character,\n            gender: cast.gender,\n            photo: prepareImage(cast.profile_path)\n        })),\n        crew: (raw.credits || []).crew.map(person => ({\n            id: person.id,\n            department: person.department,\n            job: person.job,\n            gender: person.gender,\n            name: person.name,\n            photo: prepareImage(person.profile_path)\n        })),\n\n        isExtendedDataLoaded: true\n    }\n    return Object.assign(basicData, extendedData)\n}\n","import React, {useEffect, useState} from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport Tabs from \"@material-ui/core/Tabs\"\nimport Tab from \"@material-ui/core/Tab\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {connect} from \"react-redux\"\nimport {fetchPopularMovies, fetchTopRatedMovies, fetchUpcomingMovies} from \"../store/domains/home/home.actions\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {getMovie} from \"../store/utils\"\nimport withStyles from \"@material-ui/core/styles/withStyles\"\n\nconst useStyles = makeStyles(theme => ({\n    movieList: {\n        margin: '20px 0px'\n    },\n    container: {\n        margin: '12px auto'\n    },\n}))\n\nconst CustomTabs = withStyles({\n    root: {\n        textAlign: 'center',\n        borderRadius: 4,\n        // border: '1px solid black',\n        overflow: 'hidden',\n        background: '#66AD47',\n    },\n    indicator: {\n        background: 'none'\n    }\n})(Tabs)\n\nconst CustomTab = withStyles({\n    root: {\n        minWidth: 110,\n    },\n    selected: {\n        background: '#F4BE2C',\n        color: 'white'\n    }\n})(Tab)\n\nconst categories = {\n    POPULAR: 'popular',\n    TOP_RATED: 'top-rated',\n    UPCOMING: 'upcoming'\n}\n\nconst MOVIES_PER_PAGE = 20\n\nfunction Home(props) {\n    const {\n        isAppReady,\n\n        popularMovies,\n        topRatedMovies,\n        upcomingMovies,\n\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchPopularMovies,\n        fetchTopRatedMovies,\n        fetchUpcomingMovies,\n    } = props\n\n    const [categoryName, setCategoryName] = useState(categories.POPULAR)\n    const categoryMap = {\n        [categories.POPULAR]: {\n            movies: popularMovies,\n            fetch: fetchPopularMovies\n        },\n        [categories.TOP_RATED]: {\n            movies: topRatedMovies,\n            fetch: fetchTopRatedMovies\n        },\n        [categories.UPCOMING]: {\n            movies: upcomingMovies,\n            fetch: fetchUpcomingMovies,\n        }\n    }\n    const category = categoryMap[categoryName]\n    const movies = isAppReady ? category.movies.ids.map(id => getMovie(id, entities, user)) : []\n\n    function loadMore() {\n        if(category.movies.totalMovies === category.movies.ids.length) return\n        category.fetch(category.movies.ids.length / MOVIES_PER_PAGE + 1)\n    }\n\n    function switchTab(name){\n        setCategoryName(name)\n        const newCategory = categoryMap[name]\n        if(!newCategory.movies.ids.length) newCategory.fetch()\n    }\n\n    useEffect(function () {\n        switchTab(categories.POPULAR)\n        // TODO Should I memorize the function and constants?\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n                <CustomTabs\n                    value={categoryName}\n                    onChange={(e, newValue) => switchTab(newValue)}\n                    aria-label=\"disabled tabs example\"\n                >\n                    <CustomTab label=\"Popular\" value={categories.POPULAR}/>\n                    <CustomTab label=\"Top rated\" value={categories.TOP_RATED}/>\n                    <CustomTab label=\"Upcoming\" value={categories.UPCOMING}/>\n                </CustomTabs>\n                <main className={classes.movieList}>\n                    <MovieBrowser\n                        onLoadMore={loadMore}\n                        placeholdersAmount={10}\n                        movies={movies}\n                        onFavorite={toggleFavorite}\n                        isFetched={category.movies.isFetched}\n                        isFetching={!isAppReady || category.movies.isFetching}\n                        totalMovies={category.movies.totalMovies}\n                    />\n                </main>\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n\n        popularMovies: state.home.popularMovies,\n        topRatedMovies: state.home.topRatedMovies,\n        upcomingMovies: state.home.upcomingMovies,\n\n        entities: state.entities,\n        user: state.user,\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchPopularMovies: (page) => dispatch(fetchPopularMovies(page)),\n        fetchTopRatedMovies: (page) => dispatch(fetchTopRatedMovies(page)),\n        fetchUpcomingMovies: (page) => dispatch(fetchUpcomingMovies(page)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\nimport {\n    UPCOMING_MOVIES_FETCH_FAIL,\n    UPCOMING_MOVIES_FETCH_REQUEST,\n    UPCOMING_MOVIES_FETCH_SUCCESS,\n    POPULAR_MOVIES_FETCH_FAIL,\n    POPULAR_MOVIES_FETCH_REQUEST,\n    POPULAR_MOVIES_FETCH_SUCCESS,\n    TOP_RATED_MOVIES_FETCH_FAIL,\n    TOP_RATED_MOVIES_FETCH_REQUEST,\n    TOP_RATED_MOVIES_FETCH_SUCCESS\n} from \"./home.types\"\n\nexport function fetchPopularMovies(page = 1) {\n    return {\n        type: \"FETCH_POPULAR_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/popular\",\n            handlers: {\n                request: POPULAR_MOVIES_FETCH_REQUEST,\n                success: POPULAR_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, POPULAR_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchTopRatedMovies(page = 1) {\n    return {\n        type: \"FETCH_TOP_RATED_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/top_rated\",\n            handlers: {\n                request: TOP_RATED_MOVIES_FETCH_REQUEST,\n                success: TOP_RATED_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, TOP_RATED_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchUpcomingMovies(page = 1) {\n    return {\n        type: \"FETCH_UPCOMING_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            params: {page},\n            url: \"movie/upcoming\",\n            handlers: {\n                request: UPCOMING_MOVIES_FETCH_REQUEST,\n                success: UPCOMING_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, UPCOMING_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport InputBase from \"@material-ui/core/InputBase\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport {makeStyles} from \"@material-ui/core\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'relative',\n        display: 'flex',\n        flexWrap: 'nowrap',\n    },\n    icon: {\n        position: 'absolute',\n        left: 0,\n        top: 0,\n        display: 'flex',\n        height: '100%',\n        width: theme.spacing(7),\n        pointerEvents: 'none',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    input: {\n        color: 'inherit',\n        paddingLeft: theme.spacing(7),\n        padding: 4,\n        transition: theme.transitions.create('background'),\n        background: 'rgba(0, 0, 0, 0.05)',\n        borderRadius: theme.shape.borderRadius,\n        width: '100%',\n        \"&:focus, &:hover\": {\n            background: 'rgba(0, 0, 0, 0.065)',\n        },\n        '&:focus': {\n            minWidth: 400\n        }\n    }\n}))\n\nfunction SearchInput({value, placeholder, onChange, onFocus, onBlur, style}) {\n    const classes = useStyles()\n\n    return (\n        <div className={classes.root} style={style}>\n            <div className={classes.icon}>\n                <SearchIcon />\n            </div>\n            <InputBase className={classes.input}\n                       value={value}\n                       type=\"search\"\n                       onChange={onChange}\n                       onFocus={onFocus}\n                       onBlur={onBlur}\n                       placeholder={placeholder}\n                       inputProps={{ 'aria-label': 'search' }} />\n        </div>\n    )\n}\n\nexport default SearchInput\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport {Movie} from \"./types/movie-type\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport {makeStyles, Typography} from \"@material-ui/core\"\nimport {getScoreColor} from \"./utils/score-color\"\nimport {Link} from \"react-router-dom\"\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        position: 'fixed',\n        maxHeight: 400,\n        width: '100%',\n        overflowY: 'auto',\n        background: '#CAD5E2',\n        boxShadow: '0px 10px 20px rgba(0, 0, 0, 0.22)',\n        zIndex: 2\n    }\n}))\n\nSearchOutput.propTypes = {\n    movies: PropTypes.arrayOf(Movie)\n}\n\nfunction SearchOutput({movies = [], fullHeight = false}) {\n    const classes = useStyles()\n\n    return (\n        <React.Fragment>\n            <List className={classes.root} aria-labelledby=\"nested-list-subheader\">\n                {movies.map(movie => <Item key={movie.id} movie={movie} />)}\n            </List>\n        </React.Fragment>\n    )\n}\n\nconst useItemStyles = makeStyles(theme => ({\n    item: {\n        height: 60,\n        padding: theme.spacing(1),\n        paddingLeft: 20,\n\n        [theme.breakpoints.down('sm')]: {\n            height: 90,\n        }\n    },\n    itemImage: {\n        height: '100%',\n        borderRadius: 4,\n        overflow: 'hidden',\n        flexShrink: 0\n    },\n    itemInfo: {\n         marginLeft: theme.spacing(2),\n         marginRight: theme.spacing(2)\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        marginLeft: 'auto',\n        marginRight: theme.spacing(1),\n        padding: theme.spacing(1),\n        height: '100%',\n        fontWeight: 'bold',\n        fontSize: '12pt',\n    }\n}))\n\nfunction Item({movie}){\n    const classes = useItemStyles()\n\n    const poster = movie.posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n\n    const color = getScoreColor(movie.voteAverage)\n\n    return (\n        <ListItem button component={Link} className={classes.item} to={\"/movie/\" + movie.id}>\n                <img className={classes.itemImage} src={poster} alt={movie.title}/>\n                <div className={classes.itemInfo}>\n                    <Typography variant=\"body1\">\n                        <span style={{fontWeight: 500}}>{movie.title}</span>\n                        <span style={{color: 'grey'}}>{movie.releaseDate > 0 ? ` (${movie.releaseDate.getFullYear()})` : ''}</span>\n                    </Typography>\n                    <Typography variant=\"body2\" component=\"span\" style={{color: 'grey'}}>\n                        {!!movie.genres.length ? movie.genres.join(', ') : '—'}\n                    </Typography>\n                </div>\n                <Typography\n                    variant=\"body2\"\n                    className={classes.vote}\n                    style={{color: color}}\n                >\n                    {movie.voteAverage > 0 ? movie.voteAverage : '—'}\n                </Typography>\n        </ListItem>\n    )\n}\n\nexport default SearchOutput\n","export const SEARCH_REQUEST = 'SEARCH_REQUEST'\nexport const SEARCH_SUCCESS = 'SEARCH_SUCCESS'\nexport const SEARCH_FAIL = 'SEARCH_FAIL'\nexport const SEARCH_CANCEL = 'SEARCH_CANCEL'\nexport const SEARCH_QUERY_CHANGED = 'SEARCH_QUERY_CHANGED'\n","import {ActionTask} from \"../../middlewares/utils\"\nimport {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {SEARCH_CANCEL, SEARCH_FAIL, SEARCH_QUERY_CHANGED, SEARCH_REQUEST, SEARCH_SUCCESS} from \"./search.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nconst DUMMY_ACTION = {type: \"DO_NOTHING\"}\n\nlet searchTask = {isDone: true, isCancelled: false}\n\nexport function searchMovies(query, page = 1) {\n    if (!query || !query.trim().length) {\n        if(!searchTask.isDone && !searchTask.isCancelled) {\n            // Cancel task and return DUMMY_ACTION\n            // because the cancel handler has already declared \n            // what to dispatch after cancel() call\n            searchTask.cancel()\n            return DUMMY_ACTION\n        }\n        return cancelSearch()\n    }\n    if (!searchTask.isDone && !searchTask.isCancelled) cancelSearch()\n\n    searchTask = ActionTask()\n\n    return {\n        type: \"MOVIES_SEARCH\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            url: 'search/movie',\n            method: \"GET\",\n            params: {query, page},\n            task: searchTask,\n            handlers: {\n                request: SEARCH_REQUEST,\n                success: SEARCH_SUCCESS,\n                fail: [ADD_ERROR, SEARCH_FAIL],\n                cancel: SEARCH_CANCEL\n            },\n        }\n    }\n}\n\nexport function cancelSearch(){\n    if (!searchTask.isDone && !searchTask.isCancelled) {\n        // Return DUMMY_ACTION because\n        // search action will automatically dispatch cancel handler\n        searchTask.cancel()\n        return DUMMY_ACTION\n    }\n    return {type: SEARCH_CANCEL}\n}\n\nexport function changeQuery(value){\n    return {type: SEARCH_QUERY_CHANGED, payload: {query: value}}\n}\n","import React, {useCallback, useEffect, useState} from \"react\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport {Menu as MenuIcon} from \"@material-ui/icons\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {Link} from \"react-router-dom\"\nimport {makeStyles, withStyles} from \"@material-ui/core/styles\"\nimport SearchInput from \"./SearchInput\"\nimport SearchOutput from \"./SearchOutput\"\nimport {cancelSearch, changeQuery, searchMovies} from \"../store/domains/search/search.actions\"\nimport {connect} from \"react-redux\"\nimport {debounce} from \"./utils/debounce\"\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport Button from \"@material-ui/core/Button\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\nimport {useTheme} from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n    menu: {\n        marginRight: 10\n    },\n    brand: {\n        textDecoration: 'none',\n        color: 'inherit'\n    },\n    overlay: {\n        position: 'fixed',\n        width: '100%',\n        height: '100vh',\n        top: 0,\n        left: 0,\n        background: 'rgba(9, 9, 10, 0.6)',\n        zIndex: 1\n    },\n}))\n\nconst CustomAppBar = withStyles({\n    root: {\n        color: '#333',\n        background: 'white',\n        boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)'\n    }\n})(AppBar)\n\nconst NavButton = withStyles(theme => ({\n    root: {\n        backgroundColor: 'rgba(0, 0, 0, 0.05)',\n        marginRight: theme.spacing(1),\n        marginLeft: theme.spacing(1),\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n\n        \"&:hover\": {\n            backgroundColor: 'rgba(0, 0, 0, 0.08)',\n        }\n    }\n}))(Button)\n\nfunction Navbar(props) {\n    const theme = useTheme();\n    const {onMenu} = props\n    const {query, foundMovies, entities, location} = props\n    const {changeQuery, searchMovies, cancelSearch} = props\n    const classes = useStyles()\n\n    const isMobile = useMediaQuery(theme.breakpoints.down('sm'))\n    const [showMobileSearch, setShowMobileSearch] = useState(false)\n    const [showOutput, setShowOutput] = useState(false)\n\n    // add 'genres' property\n    const output = foundMovies.map(movie => ({...movie, genres: movie.genreIds.map(id => entities.genresById[id])}))\n\n    const searchDebounce = useCallback(debounce(function (value) {\n        searchMovies(value)\n        setShowOutput(true)\n    }, 600), [searchMovies])\n\n    function handleSearchInput(e) {\n        const value = e.target.value\n        changeQuery(value)\n        cancelSearch()\n        if (value.length && value.trim().length < 2) return\n        searchDebounce(value)\n    }\n\n    // disable/enable scrolling of body element\n    useEffect(function () {\n        bodyScrolling(!(showOutput && foundMovies.length))\n    }, [showOutput, foundMovies])\n\n    // hide output when location (page) has changed\n    useEffect(function () {\n        setShowOutput(false)\n    }, [location])\n\n    const mobileNavBar = () => (\n        <React.Fragment>\n            {showOutput && <div className={classes.overlay} onClick={e => setShowOutput(false)}/>}\n            <CustomAppBar position=\"sticky\">\n                <Toolbar>\n                    <IconButton onClick={onMenu} edge=\"start\" color=\"inherit\" aria-label=\"menu\" className={classes.menu}>\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link to=\"/\" className={classes.brand}> Movie App 👋 </Link>\n                    </Typography>\n                    <IconButton onClick={e => setShowMobileSearch(!showMobileSearch)} style={{marginLeft: 'auto'}}>\n                        <SearchIcon />\n                    </IconButton>\n                </Toolbar>\n                {showMobileSearch && <div style={{margin: '5px 15px 10px 15px'}}>\n                    <SearchInput\n                        value={query}\n                        style={{width: '100%', height: 50}}\n                        placeholder={\"Search...\"}\n                        onChange={handleSearchInput}\n                        onBlur={e => !query && setShowOutput(false) }\n                        onFocus={() => setShowOutput(true)}\n                    />\n                </div>}\n                \n            </CustomAppBar>\n            {(!!output.length && showOutput) && <SearchOutput movies={output}/>}\n        </React.Fragment>\n    )\n\n    const desktopNavbar = () => (\n        <React.Fragment>\n            {showOutput && <div className={classes.overlay} onClick={e => setShowOutput(false)}/>}\n            <CustomAppBar position=\"sticky\"\n            style ={{\n                color: \"#1FAA59\",\n                direction: 'flex',\n                backgroundColor: \"#242B2E\"\n            }}\n            >\n                <Toolbar>\n                <SearchInput\n                        className=\"inputID\"\n                        value={query}\n                        placeholder={\"Search...\"}\n                        style={{marginLeft: 30, width: 250,}}\n                        onChange={handleSearchInput}\n                        onBlur={e => !query && setShowOutput(false) }\n                        onFocus={() => setShowOutput(true)}\n                    />\n                    <Typography variant=\"h6\" noWrap\n                    style={{marginLeft: \"25vw\"}}>\n                        <Link to=\"/\" className={classes.brand}>Movie App 👋</Link>\n                    </Typography>\n                    \n                    <div style={{marginLeft: 'auto'}}>\n                        <NavButton component={Link} to=\"/favorites\" color=\"inherit\">\n                            <FavoriteIcon style={{marginRight: 10, fill: \"#f50057\"}}/>\n                            Favorites\n                        </NavButton>\n                    </div>\n                </Toolbar>\n            </CustomAppBar>\n            {(!!output.length && showOutput) && <SearchOutput movies={output}/>}\n        </React.Fragment>\n    )\n\n    return (\n        isMobile ? mobileNavBar() : desktopNavbar()\n    )\n}\n\nfunction bodyScrolling(enabled) {\n    document.body.style.overflow = enabled ? '' : 'hidden'\n}\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.search,\n        entities: state.entities,\n        location: state.router.location.pathname\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        searchMovies: (query) => dispatch(searchMovies(query)),\n        cancelSearch: () => dispatch(cancelSearch()),\n        changeQuery: (value) => dispatch(changeQuery(value))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navbar)\n","export function debounce(func, wait, immediate = false) {\n    let timeout\n    return function () {\n        let context = this, args = arguments\n        let later = function () {\n            timeout = null\n            if (!immediate) func.apply(context, args)\n        }\n        let callNow = immediate && !timeout\n        clearTimeout(timeout)\n        timeout = setTimeout(later, wait)\n        if (callNow) func.apply(context, args)\n    }\n}\n","export const MOVIE_PAGE_FETCH_REQUEST = 'MOVIE_PAGE_FETCH_REQUEST'\nexport const MOVIE_PAGE_FETCH_SUCCESS = 'MOVIE_PAGE_FETCH_SUCCESS'\nexport const MOVIE_PAGE_FETCH_FAIL = 'MOVIE_PAGE_FETCH_FAIL'\n\nexport const SIMILAR_MOVIES_FETCH_REQUEST = 'SIMILAR_MOVIES_FETCH_REQUEST'\nexport const SIMILAR_MOVIES_FETCH_SUCCESS = 'SIMILAR_MOVIES_FETCH_SUCCESS'\nexport const SIMILAR_MOVIES_FETCH_FAIL = 'SIMILAR_MOVIES_FETCH_FAIL'\n\nexport const RECOMMENDED_MOVIES_FETCH_REQUEST = 'RECOMMENDED_MOVIES_FETCH_REQUEST'\nexport const RECOMMENDED_MOVIES_FETCH_SUCCESS = 'RECOMMENDED_MOVIES_FETCH_SUCCESS'\nexport const RECOMMENDED_MOVIES_FETCH_FAIL = 'RECOMMENDED_MOVIES_FETCH_FAIL'\n","import Skeleton from \"@material-ui/lab/Skeleton\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport React from \"react\"\nimport {makeStyles} from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(theme => ({\n    skeleton: {\n        background: 'rgb(181, 181, 181)',\n    },\n    icon: {\n        color: 'rgb(181, 181, 181)'\n    }\n}))\n\nfunction MoviePagePlaceholder() {\n    const classes = useStyles()\n\n    const subtitle = (width) => <Skeleton variant=\"text\" width={width} height={28} className={classes.skeleton}/>\n    const text = (rows) => Array.from(new Array(rows)).map((_, i) => (\n        <Skeleton variant=\"text\" key={i} width={100 - Math.random() * 8 + '%'} height={20} className={classes.skeleton}/>\n    ))\n\n    return (\n        <Grid container spacing={7}>\n            <Grid item md={3}>\n                <Skeleton variant=\"rect\" height={356} style={{borderRadius: 10}} width={'100%'} className={classes.skeleton}/>\n            </Grid>\n            <Grid item md={8} style={{color: 'white'}}>\n                <Skeleton variant=\"text\" width={100} height={20} className={classes.skeleton}/>\n                <Skeleton variant=\"text\" width={300} height={34} className={classes.skeleton}/>\n                <div>\n                    <Rating value={4} classes={{iconEmpty: classes.icon}} readOnly/>\n                </div>\n                {subtitle(50)}\n                {text(4)}\n                <br/>\n                {subtitle(70)}\n                {text(3)}\n            </Grid>\n        </Grid>\n    )\n}\n\nexport default MoviePagePlaceholder\n","export const Formatter = {\n    formatDate(date) {\n        const monthNames = [\n            \"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\n            \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n        ]\n        return `${date.getDay()} ${monthNames[date.getMonth()]}, ${date.getFullYear()}`\n    },\n    numberWithCommas(x) {\n        return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    }\n}\n","import React from 'react'\nimport Typography from \"@material-ui/core/Typography\"\nimport {makeStyles} from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        \"height\": 300,\n        \"background\": \"#f3f3f3\",\n        \"borderRadius\": 4,\n        \"display\": \"flex\",\n        \"justifyContent\": \"center\",\n        \"alignItems\": \"center\",\n        \"color\": \"rgba(0, 0, 0, 0.25)\"\n    }\n}))\n\n\nfunction EmptyBlock({text}) {\n    const classes = useStyles()\n    return (\n        <div className={classes.container}>\n            <Typography variant=\"body1\">{text}</Typography>\n        </div>\n    )\n}\n\nexport default EmptyBlock\n","import React, {useCallback, useEffect} from 'react'\nimport {Router, useParams} from \"react-router\"\nimport {connect} from \"react-redux\"\nimport LazyLoad from 'react-lazyload'\nimport Container from \"@material-ui/core/Container\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Rating from \"@material-ui/lab/Rating\"\nimport {makeStyles} from \"@material-ui/core/styles\"\nimport {fetchMoviePage, fetchRecommendedMovies, fetchSimilarMovies} from \"../store/domains/movie/movie.actions\"\nimport {getMovie} from \"../store/utils\"\nimport MovieBrowser from \"./MovieBrowser\"\nimport MoviePagePlaceholder from \"./placeholders/MoviePagePlaceholder\"\nimport FavoriteIcon from \"@material-ui/icons/Favorite\"\nimport Button from \"@material-ui/core/Button\"\nimport {makeMovieVisited, toggleFavorite} from \"../store/domains/user/user.actions\"\nimport {Formatter} from \"./utils/formatter\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport TheatersIcon from '@material-ui/icons/Theaters';\nimport { BorderAllOutlined, HomeRounded } from '@material-ui/icons'\nimport { borders } from '@material-ui/system';\nimport { Link } from 'react-router-dom'\nfunction Movie(props) {\n    const {id: urlId} = useParams()\n    const {\n        isAppReady,\n        movie,\n        fetchMovie,\n        toggleFavorite,\n        makeMovieVisited,\n    } = props\n\n    useEffect(function () {\n        fetchMovie(urlId)\n        window.scrollTo({top: 0, left: 0})\n    }, [urlId, fetchMovie])\n\n    useEffect(function () {\n        if(movie.isFetched) makeMovieVisited(movie.id)\n    }, [movie.id, makeMovieVisited])\n\n    return (\n        <React.Fragment>\n            <MovieInfo movie={movie} loaded={isAppReady && movie.isFetched} onFavorite={toggleFavorite}/>\n            <MovieRecommendations {...props} id={urlId}/>\n        </React.Fragment>\n    )\n}\n\nconst useStyles = makeStyles(theme => ({\n    movieContainer: {\n        paddingTop: 50,\n        paddingBottom: 50,\n    },\n    backdrop: {\n        position: 'absolute',\n        height: '100%',\n        width: '100%',\n        zIndex: -1,\n        '&:after': {\n            position: 'absolute',\n            content: \"''\",\n            display: 'block',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            background: 'rgba(30, 47, 60, 0.75)',\n            backgroundImage: 'radial-gradient(circle at 20% 50%, rgba(30, 47, 60, 0.75) 0%, rgba(48, 65, 78, 0.75) 100%)'\n        }\n    },\n    backdropImage: {\n        display: 'block',\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover',\n    },\n    poster: {\n        width: '100%',\n        borderRadius: 10,\n        boxShadow: '0px 3px 20px #0000003b',\n    },\n    releaseDate: {\n        fontSize: '11pt',\n        color: '#dadde2'\n    },\n    vote: {\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '12pt'\n    },\n    genreList: {\n        listStyle: 'none',\n        padding: 0,\n        display: 'flex',\n        flexWrap: 'wrap',\n    },\n    genre: {\n        cursor: 'pointer',\n        padding: '1px 6px',\n        marginRight: 10,\n        border: '1px solid white',\n        borderRadius: 4,\n        fontSize: '10pt'\n    },\n    subtitle: {\n        marginBottom: 8,\n        fontSize: '13pt'\n    },\n    crewList: {\n        listStyle: 'none',\n        padding: 0,\n    },\n}))\n\nfunction MovieInfo({movie, loaded, onFavorite}) {\n    const {\n        id,\n        title,\n        genres,\n        duration,\n        budget,\n        backdropImageUrl,\n        posterImageUrl,\n        releaseDate,\n        productionCountries,\n        voteAverage,\n        legend,\n        overview,\n        crew,\n        actors,\n\n        isFavorite\n    } = movie\n\n    const classes = useStyles()\n\n    const handleClick = () => {\n        window.open('/Page404')\n    }\n    \n    \n\n    const poster = posterImageUrl || require('../assets/images/abstract_movie_poster.svg')\n    // TODO Add backdrop fallback\n    // const backdrop = backdropImageUrl\n\n    // TODO Sort actors and crew by their popularity/importance\n\n    return (\n        <main style={{position: 'relative'}}>\n            <div className={classes.backdrop}>\n                <img className={classes.backdropImage} src={backdropImageUrl} alt={\"Backdrop of \" + title}/>\n            </div>\n            <Container className={classes.movieContainer}>\n                {loaded ?\n                    <Grid container spacing={7}>\n                        <Grid item md={3}>\n                            <img className={classes.poster} src={poster} alt={\"Poster of \" + title}/>\n                        </Grid>\n                        <Grid item md={9} style={{color: 'white'}}>\n                            <div className={classes.releaseDate}>\n                                {Formatter.formatDate(releaseDate)} ({productionCountries.join(', ')})\n                            </div>\n                            <Typography variant={\"h4\"} style={{fontWeight: 'bold'}} component={\"h1\"}>\n                                {title}              \n                              \n                            </Typography>\n                               \n                            <ul className={classes.genreList}>\n                                {genres.map(genre => (\n                                    <li className={classes.genre} key={genre}>{genre}</li>\n                                ))}\n                            </ul>\n                            <div className={classes.vote}>\n                                <Rating value={voteAverage / 2} readOnly/>\n                                <span style={{margin: '2px 0px 0 6px'}}>{voteAverage}/10</span>\n                                <Button\n                                    style={{marginLeft: 16}}\n                                    onClick={() => onFavorite(id)}\n                                    variant={isFavorite ? \"contained\" : \"outlined\"}\n                                    color=\"secondary\"\n                                    aria-label=\"like\"\n                                >\n                                    <FavoriteIcon/> Add to Favourites\n                                </Button>\n                                <Link to={'/Page404'}  style={{textDecoration: 'none'}}>\n                                <Button\n                                 style={{marginLeft: 25}}\n                                \n                                 variant={handleClick ? \"contained\" : \"outlined\"}\n                                 color=\"primary\"\n                                 aria-label=\"like\"\n                                >\n                                   <TheatersIcon /> Show Preview\n                                </Button>\n                                </Link>\n                                <Link to={'/'} style={{textDecoration: 'none'}} >\n                                <Button \n                                style={{\n                                    color: \"#1FAA59\",\n                                    marginLeft : \"25px\",\n                                    textDecoration: 'none'\n                                    \n                                }}\n                                 \n                                 variant={handleClick ? \"contained\" : \"outlined\"}\n                                 >\n                                   <HomeRounded /> Home\n                                </Button>\n                                </Link>\n                            </div>\n                            <div style={{marginTop: 10}}>\n                                <Typography component={\"div\"} style={{marginRight: 15}}>\n                                    <b>Duration:</b> {duration} min.\n                                </Typography>\n                                <Typography component={\"div\"}>\n                                    <b>Budget:</b> {budget ? '$' + Formatter.numberWithCommas(budget) : '-'}\n                                </Typography>\n                            </div>\n                            {legend && <React.Fragment>\n                                <h3 className={classes.subtitle}>Legend</h3>\n                                <Typography variant={\"body1\"}>{legend}</Typography>\n                            </React.Fragment>}\n                            {overview && <React.Fragment>\n                                <h3 className={classes.subtitle}>Overview</h3>\n                                <Typography variant={\"body1\"}>{overview}</Typography>\n                            </React.Fragment>}\n                            {crew.length && <React.Fragment>\n                                <h3 className={classes.subtitle}>Crew</h3>\n                                <Grid container spacing={3} component=\"ul\" className={classes.crewList}>\n                                    {crew.slice(0, 4).map((person, i) => (\n                                        <Grid item md={3} sm={6} component=\"li\" key={i} style={{paddingRight: 16}}>\n                                            <Typography variant={\"body2\"}\n                                                        style={{fontWeight: 'bold'}}>{person.name}</Typography>\n                                            <Typography\n                                                variant={\"body2\"}>{person.department}, {person.job}</Typography>\n                                        </Grid>\n                                    ))}\n                                </Grid>\n                            </React.Fragment>}\n                        </Grid>\n                    </Grid> :\n                    <MoviePagePlaceholder/>}\n            </Container>\n        </main>\n    )\n}\n\nfunction MovieRecommendations(props) {\n    const {\n        id,\n\n        movie,\n        entities,\n        user,\n\n        toggleFavorite,\n        fetchSimilarMovies,\n        fetchRecommendedMovies,\n    } = props\n\n    const {recommendedMovies: recommended, similarMovies: similar} = movie\n\n    const MOVIES_PER_LIST = 6\n\n    const recommendedMovies = recommended.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n    const similarMovies = similar.ids.slice(0, MOVIES_PER_LIST).map(id => getMovie(id, entities, user))\n\n    const fetchSimilarMoviesCb = useCallback(() => fetchSimilarMovies(id), [id, fetchSimilarMovies])\n    const fetchRecommendedMoviesCb = useCallback(() => fetchRecommendedMovies(id), [id, fetchRecommendedMovies])\n\n    return (\n        <Container>\n            <section>\n                <h2>Recommended movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={recommended.isFetching}\n                        isFetched={recommended.isFetched}\n                        movies={recommendedMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchRecommendedMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n            <section>\n                <h2>Similar movies</h2>\n                <LazyLoad height={400}>\n                    <MovieList\n                        isFetching={similar.isFetching}\n                        isFetched={similar.isFetched}\n                        movies={similarMovies}\n                        amount={MOVIES_PER_LIST}\n                        fetch={fetchSimilarMoviesCb}\n                        onFavorite={toggleFavorite}\n                    />\n                </LazyLoad>\n            </section>\n        </Container>\n    )\n}\n\n\nfunction MovieList({isFetching, isFetched, movies = [], amount, fetch, onFavorite}) {\n\n    useEffect(function () {\n        fetch()\n    }, [fetch])\n\n    if (isFetched && !movies.length) return (\n        <EmptyBlock text={\"There is no data for this movie\"} />\n    )\n\n    return (\n        <MovieBrowser placeholdersAmount={amount}\n                      isFetching={isFetching}\n                      isFetched={isFetched}\n                      movies={movies}\n                      onFavorite={onFavorite}\n        />\n    )\n}\n\nfunction mapStateToProps(state) {\n    let movie = state.movie.isFetched ? getMovie(state.movie.id, state.entities, state.user) : {}\n    movie = {...movie, ...state.movie}\n    return {\n        isAppReady: state.common.isAppReady,\n        movie: movie,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMoviePage(id)),\n        fetchSimilarMovies: (id) => dispatch(fetchSimilarMovies(id)),\n        fetchRecommendedMovies: (id) => dispatch(fetchRecommendedMovies(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id)),\n        makeMovieVisited: (id) => dispatch(makeMovieVisited(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Movie)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {\n    MOVIE_PAGE_FETCH_FAIL,\n    MOVIE_PAGE_FETCH_REQUEST,\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_FAIL,\n    RECOMMENDED_MOVIES_FETCH_REQUEST,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_FAIL,\n    SIMILAR_MOVIES_FETCH_REQUEST,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"./movie.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchMoviePage(id) {\n    return {\n        type: \"FETCH_MOVIE_PAGE\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"/movie/\" + id,\n            params: {\n                append_to_response: 'credits'\n            },\n            handlers: {\n                request: MOVIE_PAGE_FETCH_REQUEST,\n                success: MOVIE_PAGE_FETCH_SUCCESS,\n                fail: [ADD_ERROR, MOVIE_PAGE_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchSimilarMovies(movieId, page = 1) {\n    return {\n        type: \"FETCH_SIMILAR_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: `movie/${movieId}/similar`,\n            params: {page},\n            handlers: {\n                request: SIMILAR_MOVIES_FETCH_REQUEST,\n                success: SIMILAR_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, SIMILAR_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n\nexport function fetchRecommendedMovies(movieId, page = 1) {\n    return {\n        type: \"FETCH_RECOMMENDED_MOVIES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: `movie/${movieId}/recommendations`,\n            params: {page},\n            handlers: {\n                request: RECOMMENDED_MOVIES_FETCH_REQUEST,\n                success: RECOMMENDED_MOVIES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, RECOMMENDED_MOVIES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport Container from \"@material-ui/core/Container\"\nimport {makeStyles} from \"@material-ui/core\"\nimport {Link} from \"react-router-dom\"\nimport ReactHlsPlayer from 'react-hls-player';\nconst useStyles = makeStyles(theme => ({\n    container: {\n        minHeight: \"80vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        alignItems: \"center\"\n    },\n    subtitle: {\n        fontSize: '14pt'\n    },\n    action: {\n        textDecoration: 'none',\n        color: '#0037ff',\n        margin: 6,\n        \"&:hover\": {\n            textDecoration: 'underline'\n        }\n    }\n}))\n\nfunction Page404(props) {\n    const classes = useStyles()\n\n    return (\n        <Container className={classes.container}>\n           \n            <ReactHlsPlayer\n    src=\"https://content.jwplatform.com/manifests/yp34SRmf.m3u8\"\n    autoPlay={true}\n    controls={true}\n    width=\"100%\"\n    height=\"auto\"\n  >\n\n  </ReactHlsPlayer>\n                 \n            <div className={classes.subtitle}>\n                Go back to \n                <Link className={classes.action} to=\"/\">Home page.</Link>\n            </div>\n        </Container>\n    )\n}\n\nexport default Page404\n","export const MOVIE_FETCH_REQUEST = 'MOVIE_FETCH_REQUEST'\nexport const MOVIE_FETCH_SUCCESS = 'MOVIE_FETCH_SUCCESS'\nexport const MOVIE_FETCH_FAIL = 'MOVIE_FETCH_FAIL'\n","import React, {useEffect} from \"react\"\nimport MovieCard from \"./MovieCard\"\nimport MovieCardPlaceholder from \"./placeholders/MovieCardPlaceholder\"\n\n\nfunction MovieCardFetch({id, movie, ready, fetch, onFavorite}) {\n\n    useEffect(function () {\n        if (!movie && ready) fetch(id)\n    }, [id, movie, fetch, ready])\n\n    return (\n        !!movie ? <MovieCard {...movie} onFavorite={onFavorite}/> : <MovieCardPlaceholder/>\n    )\n}\n\nexport default MovieCardFetch\n","import React from 'react'\nimport LazyLoad from 'react-lazyload'\nimport {connect} from \"react-redux\"\nimport Typography from \"@material-ui/core/Typography\"\nimport Container from \"@material-ui/core/Container\"\nimport EmptyBlock from \"./placeholders/EmptyBlock\"\nimport {fetchMovie} from \"../store/domains/entities/entities.actions\"\nimport {getMovie} from \"../store/utils\"\nimport {toggleFavorite} from \"../store/domains/user/user.actions\"\nimport MovieCardFetch from \"./MovieCardFetch\"\nimport MovieList, {MovieListItem} from \"./MovieList\"\n\nfunction Favorites({isAppReady, movieIds, entities, user, fetchMovie, toggleFavorite}) {\n\n    return (\n        <Container style={{margin: '20px auto', height: '100vh'}}>\n            <Typography component=\"h2\" variant=\"h4\" style={{margin: '40px 0', color: '#fff'}}>\n                Favorite movies\n            </Typography>\n            {!movieIds.length && (\n                <EmptyBlock text=\"You haven't marked favorite movies yet\"/>\n            )}\n            {!!movieIds.length && (\n                <MovieList>\n                    {movieIds.map(id => {\n                        const movie = getMovie(id, entities, user)\n                        return (\n                            <LazyLoad minheight={400} key={id} once>\n                                <MovieListItem>\n                                    <MovieCardFetch\n                                        id={id}\n                                        movie={movie}\n                                        fetch={fetchMovie}\n                                        ready={isAppReady}\n                                        onFavorite={toggleFavorite}\n                                    />\n                                </MovieListItem>\n                            </LazyLoad>\n                        )\n                    })}\n                </MovieList>\n            )}\n        </Container>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isAppReady: state.common.isAppReady,\n        movieIds: state.user.favoriteMovieIds,\n        entities: state.entities,\n        user: state.user\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchMovie: (id) => dispatch(fetchMovie(id)),\n        toggleFavorite: (id) => dispatch(toggleFavorite(id))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Favorites)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {MOVIE_FETCH_FAIL, MOVIE_FETCH_REQUEST, MOVIE_FETCH_SUCCESS} from \"./entities.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchMovie(id) {\n    return {\n        type: \"FETCH_MOVIE\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"/movie/\" + id,\n            params: {\n                append_to_response: 'credits'\n            },\n            handlers: {\n                request: MOVIE_FETCH_REQUEST,\n                success: MOVIE_FETCH_SUCCESS,\n                fail: [ADD_ERROR, MOVIE_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import React from 'react'\nimport Drawer from \"@material-ui/core/Drawer\"\nimport List from \"@material-ui/core/List\"\nimport ListItem from \"@material-ui/core/ListItem\"\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\"\nimport ListItemText from \"@material-ui/core/ListItemText\"\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport VisibilityIcon from '@material-ui/icons/Visibility'\nimport Divider from \"@material-ui/core/Divider\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport {GitHub, Instagram, LinkedIn, Menu as MenuIcon, TimelineSharp} from \"@material-ui/icons\"\nimport Typography from \"@material-ui/core/Typography\"\nimport {Link} from \"react-router-dom\"\nimport {makeStyles} from \"@material-ui/core\"\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder'\n\nconst useStyles = makeStyles(theme => ({\n    list: {\n        width: 250,\n    },\n    brand: {\n        textDecoration: 'none',\n        color: 'inherit'\n    },\n    text :{\n       textAlign: 'center',\n       marginTop: '500px'\n\n    },\n    social: {\n       marginRight: '15px',\n       textAlign: 'center'\n    }\n}))\n\nfunction Sidebar({open, onClose}) {\n    const classes = useStyles()\n\n    return (\n        <Drawer anchor=\"left\" variant=\"temporary\" open={open} onClose={onClose}>\n            <List className={classes.list}>\n                <ListItem button key=\"favorite\">\n                    <IconButton onClick={onClose} edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n                        <MenuIcon/>\n                    </IconButton>\n                    <Typography variant=\"h6\" noWrap>\n                        <Link className={classes.brand} to=\"/\">Movie App 👋</Link>\n                    </Typography>\n                </ListItem>\n                <Divider />\n                <ListItem component={Link} to=\"/favorites\" button key=\"favorite\">\n                    <ListItemIcon><FavoriteIcon/></ListItemIcon>\n                    <ListItemText primary=\"Favorites\" />\n                </ListItem>\n                <ListItem>\n                <Typography variant=\"h6\" overflowWrap>\n                        <ListItemText className={classes.text} to=\"/\">This App is Made by Zafar Abbas</ListItemText>\n                    </Typography>\n                </ListItem>\n                <ListItem className={classes.social}>\n                <Link to={{ pathname: \"https://www.instagram.com/az.zzzafar/\" }} target=\"_blank\">\n                    <ListItemIcon>\n                        <Instagram />\n                    </ListItemIcon>\n                 </Link>  \n                 \n                 <Link to={{ pathname: \"https://github.com/bts-zafar\" }} target=\"_blank\">\n                    <ListItemIcon>\n                        <GitHub />\n                    </ListItemIcon>\n                 </Link>  \n                 <Link to={{ pathname: \"https://github.com/bts-zafar\" }} target=\"_blank\">\n                    <ListItemIcon>\n                        <LinkedIn />\n                    </ListItemIcon>\n                 </Link>   \n                </ListItem>\n            </List>\n        </Drawer>\n    )\n}\n\nexport default Sidebar\n","import React, {useEffect, useState} from 'react'\nimport {connect} from \"react-redux\"\nimport {Switch, Route} from \"react-router-dom\"\nimport CssBaseline from \"@material-ui/core/CssBaseline\"\nimport LinearProgress from \"@material-ui/core/LinearProgress\"\nimport {fetchGenres} from \"../store/domains/common/common.actions\"\nimport {SnackbarProvider} from \"notistack\"\nimport Notifier from \"./Notifier\"\nimport Home from \"./Home\"\nimport Navbar from \"./Navbar\"\nimport Movie from \"./Movie\"\nimport Page404 from \"./Page404\"\nimport Favorites from \"./Favorites\"\nimport Sidebar from \"./Sidebar\"\n\n\n\nfunction App(props) {\n    const {isLoading, location, fetchGenres} = props\n    const [showSidebar, setShowSidebar] = useState(false)\n\n    useEffect(function () {\n        fetchGenres()\n    }, [fetchGenres])\n\n    useEffect(function () {\n        setShowSidebar(false)\n    }, [location])\n\n    return (\n        <SnackbarProvider autoHideDuration={30 * 1000}>\n            <CssBaseline/>\n            <Notifier/>\n            {isLoading && <LinearProgress style={{position: 'fixed', top: 0, width: '100%', zIndex: 9999}}/>}\n            <Navbar onMenu={() => setShowSidebar(!showSidebar)}/>\n            <Sidebar open={showSidebar} onClose={() => setShowSidebar(!showSidebar)} />\n            <Switch>\n                <Route exact path=\"/\" component={Home}/>\n                <Route path=\"/movie/:id\" component={Movie}/>\n                <Route path=\"/favorites\" component={Favorites}/>\n                <Route component={Page404}/>\n            </Switch>\n        </SnackbarProvider>\n    );\n}\n\nfunction mapStateToProps(state) {\n    return {\n        isLoading: !state.common.isGenresLoaded || state.search.isFetching || state.movie.isFetching,\n        errors: state.ui.errors,\n        location: state.router.location.pathname\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        fetchGenres: () => dispatch(fetchGenres()),\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import {MOVIEDB_MIDDLEWARE} from \"../../middlewares/moviedb-api\"\nimport {GENRES_FETCH_FAIL, GENRES_FETCH_REQUEST, GENRES_FETCH_SUCCESS} from \"./common.types\"\nimport {ADD_ERROR} from \"../ui/ui.types\"\n\nexport function fetchGenres() {\n    return {\n        type: \"FETCH_GENRES\",\n        payload: null,\n        meta: {\n            target: MOVIEDB_MIDDLEWARE,\n            method: \"GET\",\n            url: \"genre/movie/list\",\n            params: null,\n            handlers: {\n                request: GENRES_FETCH_REQUEST,\n                success: GENRES_FETCH_SUCCESS,\n                fail: [ADD_ERROR, GENRES_FETCH_FAIL]\n            }\n        }\n    }\n}\n","import {GENRES_FETCH_FAIL, GENRES_FETCH_REQUEST, GENRES_FETCH_SUCCESS} from \"./common.types\"\n\nconst initialState = {\n    // main state\n    isAppReady: false,\n    // for better control\n    isGenresLoaded: false,\n}\n\nexport function commonReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case GENRES_FETCH_REQUEST:\n        case GENRES_FETCH_FAIL:\n            return {...state, isGenresLoaded: false, isAppReady: false}\n        case GENRES_FETCH_SUCCESS:\n            return {...state, isGenresLoaded: true, isAppReady: true}\n        default:\n            return state\n    }\n}\n","const universalMessage = \"Something went wrong\"\n\nexport function prepareError(error) {\n    if(typeof error === 'string') return error\n    else if(error.isAxiosError) {\n        if(!error.response) {\n            return error.message || universalMessage\n        }\n        const status = error.response.status\n        if(status === 404) return universalMessage\n        else if(error.response.message) return error.response.message\n        else return error.message\n    } else if(error.message){\n        return error.message\n    } else if(error.error) {\n        return prepareError(error.error)\n    }\n    return universalMessage\n}\n","import {ADD_ERROR, REMOVE_ERROR} from \"./ui.types\"\nimport {prepareError} from \"./ui.utils\"\nimport {generateId} from \"../../../utils/common\"\n\nconst initialState = {\n    errors: [],\n}\n\nexport function uiReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case ADD_ERROR:\n            console.error(payload.error)\n            const error = {\n                id: generateId(),\n                message: prepareError(payload.error),\n                date: new Date()\n            }\n            return {...state, errors: [...state.errors, error]}\n        case REMOVE_ERROR:\n            const {error: {id}} = payload\n            return {...state, errors: state.errors.filter(err => err.id !== id)}\n        default:\n            return state\n    }\n}\n\n","import {USER_CLEARED_VISITED_MOVIES, USER_FAVORITE_TOGGLE, USER_VISITED_MOVIE} from \"./user.types\"\n\nconst initialState = {\n    visitedMovieIds: JSON.parse(localStorage.getItem('visitedMovies')) || [],\n    favoriteMovieIds: JSON.parse(localStorage.getItem('favoriteMovies')) || []\n}\n\nexport function userReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case USER_FAVORITE_TOGGLE: {\n            const id = payload.id\n            let favoriteMovieIds\n            const isFavorite = state.favoriteMovieIds.indexOf(id) !== -1\n            if(isFavorite) favoriteMovieIds = state.favoriteMovieIds.filter(movieId => movieId !== id)\n            else favoriteMovieIds = [id,...state.favoriteMovieIds]\n            localStorage.setItem('favoriteMovies', JSON.stringify(favoriteMovieIds))\n            return {...state, favoriteMovieIds: favoriteMovieIds}\n        }\n        case USER_VISITED_MOVIE: {\n            const id = payload.id\n            const visitedMovieIds = [...new Set([id, ...state.visitedMovieIds])]\n            localStorage.setItem('visitedMovies', JSON.stringify(visitedMovieIds))\n            return {...state, visitedMovieIds: visitedMovieIds}\n        }\n        case USER_CLEARED_VISITED_MOVIES: {\n            localStorage.setItem('visitedMovies', JSON.stringify([]))\n            return {...state, visitedMovieIds: []}\n        }\n        default:\n            return state\n    }\n}\n","// TODO Should I put this reducer in another place?\n\nconst moviesFetchInitialState = {\n    ids: [],\n    isFetching: true,\n    isFetched: false,\n    totalMovies: 0\n}\n\n// Sub-reducer\n// ---\n// Used for widget-like components that load list of movies.\n// The reducer keeps only the ids of movies so you should save the full data of movies in 'entities' reducer.\n// TODO Think of a better name\nexport function moviesFetchReducer(prefix, state = moviesFetchInitialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case prefix + \"_FETCH_REQUEST\":\n            return {...state, isFetching: true}\n        case prefix + \"_FETCH_SUCCESS\":\n            const {total_results: totalMovies, results: movies} = payload\n            const movieIds = movies.map(movie => movie.id)\n            return {\n                ids: [...state.ids, ...movieIds],\n                isFetching: false,\n                isFetched: true,\n                totalMovies: totalMovies\n            }\n        case prefix + \"_FETCH_FAIL\":\n            return {...state, isFetching: false, isFetched: false}\n        default:\n            return state\n    }\n}\n","import {\n    MOVIE_PAGE_FETCH_FAIL,\n    MOVIE_PAGE_FETCH_REQUEST,\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_FAIL,\n    RECOMMENDED_MOVIES_FETCH_REQUEST,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_FAIL,\n    SIMILAR_MOVIES_FETCH_REQUEST,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"./movie.types\"\nimport {moviesFetchReducer} from \"../shared\"\n\nconst initialState = {\n    id: null,\n    isFetching: false,\n    isFetched: false,\n    similarMovies: moviesFetchReducer(\"SIMILAR_MOVIES\", undefined, {}),\n    recommendedMovies: moviesFetchReducer(\"RECOMMENDED_MOVIES\", undefined, {}),\n}\n\nexport function movieReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case MOVIE_PAGE_FETCH_REQUEST:\n            return {...initialState, isFetching: true}\n        case MOVIE_PAGE_FETCH_FAIL:\n            return {...state, isFetched: false, isFetching: false}\n        case MOVIE_PAGE_FETCH_SUCCESS:\n            return {\n                ...state,\n                id: payload.id,\n                isFetched: true,\n                isFetching: false,\n            }\n        case SIMILAR_MOVIES_FETCH_REQUEST:\n        case SIMILAR_MOVIES_FETCH_SUCCESS:\n        case SIMILAR_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                similarMovies: moviesFetchReducer(\"SIMILAR_MOVIES\", state.similarMovies, action)\n            }\n        case RECOMMENDED_MOVIES_FETCH_REQUEST:\n        case RECOMMENDED_MOVIES_FETCH_SUCCESS:\n        case RECOMMENDED_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                recommendedMovies: moviesFetchReducer(\"RECOMMENDED_MOVIES\", state.recommendedMovies, action)\n            }\n        default:\n            return state\n    }\n}\n","import {\n    UPCOMING_MOVIES_FETCH_FAIL,\n    UPCOMING_MOVIES_FETCH_REQUEST,\n    UPCOMING_MOVIES_FETCH_SUCCESS,\n    POPULAR_MOVIES_FETCH_FAIL,\n    POPULAR_MOVIES_FETCH_REQUEST,\n    POPULAR_MOVIES_FETCH_SUCCESS, TOP_RATED_MOVIES_FETCH_FAIL,\n    TOP_RATED_MOVIES_FETCH_REQUEST, TOP_RATED_MOVIES_FETCH_SUCCESS\n} from \"./home.types\"\nimport {moviesFetchReducer} from \"../shared\"\n\nconst initialState = {\n    popularMovies: moviesFetchReducer(\"POPULAR_MOVIES\", undefined, {}),\n    topRatedMovies: moviesFetchReducer(\"TOP_RATED_MOVIES\", undefined, {}),\n    upcomingMovies: moviesFetchReducer(\"UPCOMING_MOVIES\", undefined, {}),\n}\n\nexport function homeReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case POPULAR_MOVIES_FETCH_REQUEST:\n        case POPULAR_MOVIES_FETCH_SUCCESS:\n        case POPULAR_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                popularMovies: moviesFetchReducer(\"POPULAR_MOVIES\", state.popularMovies, action)\n            }\n        case TOP_RATED_MOVIES_FETCH_REQUEST:\n        case TOP_RATED_MOVIES_FETCH_SUCCESS:\n        case TOP_RATED_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                topRatedMovies: moviesFetchReducer(\"TOP_RATED_MOVIES\", state.topRatedMovies, action)\n            }\n        case UPCOMING_MOVIES_FETCH_REQUEST:\n        case UPCOMING_MOVIES_FETCH_SUCCESS:\n        case UPCOMING_MOVIES_FETCH_FAIL:\n            return {\n                ...state,\n                upcomingMovies: moviesFetchReducer(\"UPCOMING_MOVIES\", state.upcomingMovies, action)\n            }\n        default:\n            return state\n    }\n}\n","import {\n    POPULAR_MOVIES_FETCH_SUCCESS,\n    TOP_RATED_MOVIES_FETCH_SUCCESS,\n    UPCOMING_MOVIES_FETCH_SUCCESS\n} from \"../home/home.types\"\nimport {GENRES_FETCH_SUCCESS} from \"../common/common.types\"\nimport {\n    MOVIE_PAGE_FETCH_SUCCESS,\n    RECOMMENDED_MOVIES_FETCH_SUCCESS,\n    SIMILAR_MOVIES_FETCH_SUCCESS\n} from \"../movie/movie.types\"\nimport {MOVIE_FETCH_SUCCESS} from \"./entities.types\"\nimport {prepareMovie} from \"../../utils\"\n\nconst initialState = {\n    moviesById: {},\n    genresById: {}\n}\n\nexport function entitiesReducer(state = initialState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case GENRES_FETCH_SUCCESS: {\n            const genresById = {}\n            for (let genre of payload.genres) {\n                genresById[genre.id] = genre.name\n            }\n            return {...state, genresById: genresById}\n        }\n        case POPULAR_MOVIES_FETCH_SUCCESS:\n        case TOP_RATED_MOVIES_FETCH_SUCCESS:\n        case UPCOMING_MOVIES_FETCH_SUCCESS:\n        case SIMILAR_MOVIES_FETCH_SUCCESS:\n        case RECOMMENDED_MOVIES_FETCH_SUCCESS: {\n            const moviesById = {...state.moviesById}\n            for (let movie of payload.results) {\n                const preparedMovie = prepareMovie({raw: movie, extended: false})\n                if(moviesById[movie.id] && moviesById[movie.id].isExtendedDataLoaded) {\n                    moviesById[movie.id] = {...moviesById[movie.id], ...preparedMovie}\n                } else {\n                    moviesById[movie.id] = preparedMovie\n                }\n                moviesById[movie.id].fetchDate = new Date()\n            }\n            return {...state, moviesById: moviesById}\n        }\n        case MOVIE_PAGE_FETCH_SUCCESS:\n        case MOVIE_FETCH_SUCCESS: {\n            const movie = prepareMovie({raw: payload, extended: true})\n            const moviesById = {...state.moviesById}\n            moviesById[movie.id] = movie\n            moviesById[movie.id].fetchDate = new Date()\n            return {...state, moviesById: moviesById}\n        }\n        default:\n            return state\n    }\n}\n","import {SEARCH_CANCEL, SEARCH_FAIL, SEARCH_QUERY_CHANGED, SEARCH_REQUEST, SEARCH_SUCCESS} from \"./search.types\"\nimport {prepareMovie} from \"../../utils\"\nimport {LOCATION_CHANGE} from 'connected-react-router';\n\nconst initialSearchState = {\n    query: '',\n    isFetching: false,\n    isFetched: false,\n    foundMovies: []\n}\n\n// sub-reducer\nexport function searchReducer(state = initialSearchState, action) {\n    const {type, payload} = action\n    switch (type) {\n        case LOCATION_CHANGE:\n            return initialSearchState\n        case SEARCH_QUERY_CHANGED:\n            return {...state, query: payload.query}\n        case SEARCH_REQUEST:\n            return {...state, isFetching: true, isFetched: false, foundMovies: []}\n        case SEARCH_SUCCESS: {\n            let movies = payload.results.map(movie => prepareMovie({raw: movie, posterSize: 'w154'}))\n            movies = filterEmptyMovies(movies).sort((a, b) => b.popularity - a.popularity)\n            return {\n                ...state,\n                isFetching: false,\n                isFetched: true,\n                foundMovies: movies\n            }\n        }\n        case SEARCH_FAIL:\n        case SEARCH_CANCEL:\n            return {...state, isFetching: false, isFetched: false, foundMovies: []}\n        default:\n            return state\n    }\n}\n\nfunction filterEmptyMovies(movies) {\n    return movies.filter(m => {\n        return !!m.title && m.popularity > 0.25\n    })\n}\n","import {applyMiddleware, combineReducers, createStore, compose} from 'redux'\nimport {createBrowserHistory} from 'history'\nimport {MovieDbApiMiddleware} from \"./middlewares/moviedb-api\"\nimport {createLogger} from \"redux-logger\"\nimport {connectRouter, routerMiddleware} from 'connected-react-router'\nimport {commonReducer} from \"./domains/common/common.reducer\"\nimport {uiReducer} from \"./domains/ui/ui.reducer\"\nimport {userReducer} from \"./domains/user/user.reducer\"\nimport {movieReducer} from \"./domains/movie/movie.reducer\"\nimport {homeReducer} from \"./domains/home/home.reducer\"\nimport {entitiesReducer} from \"./domains/entities/entities.reducer\"\nimport {searchReducer} from \"./domains/search/search.reducer\"\n\nexport const history = createBrowserHistory()\n\nconst getMiddleware = function () {\n    return process.env.NODE_ENV === 'production' ?\n        applyMiddleware(MovieDbApiMiddleware(), routerMiddleware(history)) :\n        applyMiddleware(MovieDbApiMiddleware(), routerMiddleware(history), createLogger())\n}\n\nconst rootReducer = combineReducers({\n    ui: uiReducer,\n    common: commonReducer,\n    user: userReducer,\n    movie: movieReducer,\n    home: homeReducer,\n    search: searchReducer,\n    entities: entitiesReducer,\n    router: connectRouter(history)\n})\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport const store = createStore(rootReducer, composeEnhancers(getMiddleware()))\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport {Provider} from \"react-redux\"\nimport { ConnectedRouter } from 'connected-react-router'\nimport {store, history} from \"./store/store\"\n\nReactDOM.render(\n    <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <App />\n        </ConnectedRouter>\n    </Provider>,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}